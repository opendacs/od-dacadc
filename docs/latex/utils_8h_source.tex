\hypertarget{utils_8h_source}{}\doxysection{utils.\+h}
\label{utils_8h_source}\index{C:/Users/benja/Documents/Repos/od-\/dacadc/include/utils.h@{C:/Users/benja/Documents/Repos/od-\/dacadc/include/utils.h}}
\mbox{\hyperlink{utils_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ UTILS\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ UTILS\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <SPI.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <WString.h>}}
\DoxyCodeLine{00006\ \textcolor{keyword}{using\ namespace\ }std;}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{utils_8h_a0c8186d9b9b7880309c27230bbb5e69d}{byte}};}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacespi__utils}{spi\_utils}}}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structspi__utils_1_1_message}{Message}}\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{structspi__utils_1_1_message_a25c6c7a32d7eb69a6660098cc4a7b291}{kDataLen}}\ =\ 64;}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{byte}\ \mbox{\hyperlink{structspi__utils_1_1_message_a6e5913cc18e999886e2b2bdc709ecd1f}{msg}}[\mbox{\hyperlink{structspi__utils_1_1_message_a25c6c7a32d7eb69a6660098cc4a7b291}{kDataLen}}];}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{byte}\ \mbox{\hyperlink{structspi__utils_1_1_message_af722431f5bff3e4efea7b7bd6a314572}{data}}[\mbox{\hyperlink{structspi__utils_1_1_message_a25c6c7a32d7eb69a6660098cc4a7b291}{kDataLen}}];}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ uint8\_t\ \mbox{\hyperlink{structspi__utils_1_1_message_a5cc96d73b5c86a7888d675fba0a5bffd}{blockSize}};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ uint8\_t\ \mbox{\hyperlink{structspi__utils_1_1_message_a20dd8b1ebe4f4483cd887c058a6551f6}{nBlocks}};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ \ \ uint8\_t\ data\_transfer(uint8\_t\ data[],\ uint8\_t\ blockSize,\ uint8\_t\ nBlocks,\ uint8\_t\ sync\_pin)\ \{}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ spi\_utils::Message\ msg\ =\ data;}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ msg.blockSize\ =\ blockSize;}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ msg.nBlocks\ =\ nBlocks;}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ for\ (uint8\_t\ block\ =\ 0;\ block\ <\ msg.nBlocks;\ block++)\ \{}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ digitalWrite(sync\_pin,\ LOW);}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ for\ (uint8\_t\ db\ =\ 0;\ db\ <\ msg.blockSize;\ db++)\ \{}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ SPI.transfer(msg.msg[block\ *\ msg.blockSize\ +\ db]);}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ digitalWrite(sync\_pin,\ HIGH);}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ return\ 0;}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinterface__utils}{interface\_utils}}\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keyword}{static}\ uint8\_t\ \mbox{\hyperlink{namespaceinterface__utils_a621a9a590c5f0d2352aaa9280694364e}{querySerial}}(String\ cmd[])\ \{}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ received;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ String\ cmdElement\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ uint8\_t\ cmdSize\ =\ 0;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (received\ !=\ \textcolor{charliteral}{'\(\backslash\)r'})\ \{}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(Serial.available())\ \{}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ received\ =\ Serial.read();}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (received\ ==\ \textcolor{charliteral}{'\(\backslash\)n'}\ ||\ received\ ==\ \textcolor{charliteral}{'\ '})\ \{\}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (received\ ==\ \textcolor{charliteral}{','}\ ||\ received\ ==\ \textcolor{charliteral}{'\(\backslash\)r'}\ ||\ received\ ==\ \textcolor{charliteral}{':'})\ \{}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmd[cmdSize]\ =\ cmdElement;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmdElement\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++cmdSize;}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cmdElement\ +=\ received;}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cmdSize;}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ UTILS\_H}}
\DoxyCodeLine{00141\ }

\end{DoxyCode}
