\hypertarget{ad5791_8h_source}{}\doxysection{ad5791.\+h}
\label{ad5791_8h_source}\index{C:/Users/benja/Documents/Repos/od-\/dacadc/include/ad5791.h@{C:/Users/benja/Documents/Repos/od-\/dacadc/include/ad5791.h}}
\mbox{\hyperlink{ad5791_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ AD5791\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ AD5791\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <SPI.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{utils_8h}{utils.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\#include\ "{}ramp.h"{}}}
\DoxyCodeLine{00007\ \textcolor{keyword}{using\ namespace\ }std;}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ad5791_8h_a0c8186d9b9b7880309c27230bbb5e69d}{byte}};}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_a_d5791}{AD5791}}\ }
\DoxyCodeLine{00013\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structspi__utils_1_1_message}{spi\_utils::Message}}\ \mbox{\hyperlink{class_a_d5791_a2608cb0a15ad4a852df86c48b427453f}{initializeMsg}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structspi__utils_1_1_message}{spi\_utils::Message}}\ \mbox{\hyperlink{class_a_d5791_ace55466f178a90bf48a626b38ad3bac2}{setVoltageMsg}}(\textcolor{keywordtype}{double}\ voltage);}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structspi__utils_1_1_message}{spi\_utils::Message}}\ \mbox{\hyperlink{class_a_d5791_a78d2b485b36e92704bb63736bd69b10a}{readDacMsg}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structspi__utils_1_1_message}{spi\_utils::Message}}\ \mbox{\hyperlink{class_a_d5791_a3b51f220dfe4268170cb245775815dff}{threeNullBytesMsg}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_ad07c492e8431b290a93c841b10578d90}{bytesToVoltage}}(\mbox{\hyperlink{structspi__utils_1_1_message}{spi\_utils::Message}}\ message);}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}\ =\ 4;}
\DoxyCodeLine{00025\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a09bbd20a7b0c2bb0e936728ab4cb36cc}{ldacPin}},\ \mbox{\hyperlink{class_a_d5791_a19c5fcbe5bb3d9480a2d7ebc845df799}{spiMode}};}
\DoxyCodeLine{00026\ \ \ \ \ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{comment}{//\ dacSyncPins\ identifies\ the\ dac\ chip;\ each\ chip\ has\ a\ unique\ sync\_pin.}}
\DoxyCodeLine{00028\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_aa27da6e0b3ed51d4ad91b21f3efef1ad}{dacSyncPins}}[\mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}];}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//Numbering\ system\ conversions}}
\DoxyCodeLine{00031\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a5bc3ad1dd1dd8cd91c497b4693b35cc6}{intToThreeBytes}}(\textcolor{keywordtype}{int}\ decimal,\ \textcolor{keywordtype}{byte}\ *DB1,\ \textcolor{keywordtype}{byte}\ *DB2,\ \textcolor{keywordtype}{byte}\ *DB3);}
\DoxyCodeLine{00032\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{class_a_d5791_a5ec9971f907072befbe6c9f1be5aa933}{threeByteToInt}}(\textcolor{keywordtype}{byte}\ DB1,\textcolor{keywordtype}{byte}\ DB2,\ \textcolor{keywordtype}{byte}\ DB3);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_a710d1f0b068a9a95b3c705da03f76a2d}{threeByteToVoltage}}(uint8\_t\ DB1,\ uint8\_t\ DB2,\ uint8\_t\ DB3);}
\DoxyCodeLine{00034\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a7780cb107c5e5921d6b925d9e055c426}{voltageToDecimal}}(\textcolor{keywordtype}{float}\ voltage,\ \textcolor{keywordtype}{byte}\ *DB1,\ \textcolor{keywordtype}{byte}\ *DB2,\ \textcolor{keywordtype}{byte}\ *DB3);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//AD5791(void)\ =\ default;}}
\DoxyCodeLine{00038\ \ \ \ \ SPISettings\ \mbox{\hyperlink{class_a_d5791_a8ec89d4e0a3e8f8edb57c1f7332daf5d}{dacSettings}}\ =\ SPISettings(1000000,\ MSBFIRST,\ SPI\_MODE1);}
\DoxyCodeLine{00039\ \ \ \ \ String\ \mbox{\hyperlink{class_a_d5791_a77baab33c67c4bcce29dda25f67aab6c}{name}}\ =\ \textcolor{stringliteral}{"{}DACNAMEHERE"{}};}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_a_d5791_ae084426c7efd4cbfb4e5c5598835e671}{DAC\_FULL\_SCALE}}\ =\ 10.0;}
\DoxyCodeLine{00048\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a75c5fd4fdff1c09b79bb4805a0e633bd}{begin}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00055\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a8e74299fe9f435b3ce4664fe3ef1b21b}{initialize}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_a_d5791_a9097cb47f1c7e75e7e28c4d477fdc2c0}{LDAC}};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_a_d5791_a7f4d35074bf31b1ddabf56040a8798bc}{dac}}[\mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}]\ =\ \{12,\ 13,\ 14,\ 15\};\ \textcolor{comment}{//Define!}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_a_d5791_ab71f18934fc275834c62fb0554f47f2a}{GE}}[\mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}]\ =\ \{1,\ 1,\ 1,\ 1\};\ \textcolor{comment}{//\ Offset\ error}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_a_d5791_ae494f5b2b4cdab410679b3ead2fb7d6b}{OS}}[\mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}]\ =\ \{0,\ 0,\ 0,\ 0\};\ \textcolor{comment}{//\ Gain\ error}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_a41ac934555dba2f5ddf61d88adb04e7f}{vReadings}}[4]\ =\ \{0,\ 0,\ 0,\ 0\};}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_a913259b0645069859ee6d7046a10a912}{setVoltage}}(uint8\_t\ channel,\ \textcolor{keywordtype}{double}\ voltage,\ \textcolor{keywordtype}{bool}\ updateOutputs);}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_a7ed87840044b22de91def41017467414}{readDac}}(uint8\_t\ channel);}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{class_a_d5791_acca3344b0eb2f7949880d93f0069f6dc}{readVoltage}}(uint8\_t\ channel);}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{class_a_d5791}{AD5791}}(uint8\_t\ syncPins[\mbox{\hyperlink{class_a_d5791_aa6ff6281229123133ca98f75568d7587}{nChannels}}],\ uint8\_t\ \mbox{\hyperlink{class_a_d5791_a09bbd20a7b0c2bb0e936728ab4cb36cc}{ldacPin}});}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_a_d5791_a8d9b1d3950512f2ceac000f90e1fede3}{updateAnalogOutputs}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00077\ \};}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ AD5791\_H}}
\DoxyCodeLine{00079\ }

\end{DoxyCode}
