<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>High Fidelity Acquisition &amp; Signal Transmitter (FAST): AD5791 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">High Fidelity Acquisition &amp; Signal Transmitter (FAST)<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">4 AD5791, 1 AD4115 with Arduino Due</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classAD5791.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classAD5791-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AD5791 Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a75c5fd4fdff1c09b79bb4805a0e633bd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a75c5fd4fdff1c09b79bb4805a0e633bd">begin</a> (void)</td></tr>
<tr class="memdesc:a75c5fd4fdff1c09b79bb4805a0e633bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC and sets up the required pins and SPI.  <a href="classAD5791.html#a75c5fd4fdff1c09b79bb4805a0e633bd">More...</a><br /></td></tr>
<tr class="separator:a75c5fd4fdff1c09b79bb4805a0e633bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e74299fe9f435b3ce4664fe3ef1b21b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a8e74299fe9f435b3ce4664fe3ef1b21b">initialize</a> (void)</td></tr>
<tr class="memdesc:a8e74299fe9f435b3ce4664fe3ef1b21b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#a8e74299fe9f435b3ce4664fe3ef1b21b">More...</a><br /></td></tr>
<tr class="separator:a8e74299fe9f435b3ce4664fe3ef1b21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a913259b0645069859ee6d7046a10a912"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a913259b0645069859ee6d7046a10a912">setVoltage</a> (uint8_t channel, double voltage, bool updateOutputs)</td></tr>
<tr class="memdesc:a913259b0645069859ee6d7046a10a912"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the voltage on the specified channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#a913259b0645069859ee6d7046a10a912">More...</a><br /></td></tr>
<tr class="separator:a913259b0645069859ee6d7046a10a912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed87840044b22de91def41017467414"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a7ed87840044b22de91def41017467414">readDac</a> (uint8_t channel)</td></tr>
<tr class="memdesc:a7ed87840044b22de91def41017467414"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the DAC value from the specified channel.  <a href="classAD5791.html#a7ed87840044b22de91def41017467414">More...</a><br /></td></tr>
<tr class="separator:a7ed87840044b22de91def41017467414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acca3344b0eb2f7949880d93f0069f6dc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#acca3344b0eb2f7949880d93f0069f6dc">readVoltage</a> (uint8_t channel)</td></tr>
<tr class="memdesc:acca3344b0eb2f7949880d93f0069f6dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the voltage value from the specified channel.  <a href="classAD5791.html#acca3344b0eb2f7949880d93f0069f6dc">More...</a><br /></td></tr>
<tr class="separator:acca3344b0eb2f7949880d93f0069f6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5225e175cead067333287504deac952"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#aa5225e175cead067333287504deac952">AD5791</a> (uint8_t syncPins[nChannels], uint8_t ldacPin)</td></tr>
<tr class="memdesc:aa5225e175cead067333287504deac952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classAD5791.html">AD5791</a> DAC class.  <a href="classAD5791.html#aa5225e175cead067333287504deac952">More...</a><br /></td></tr>
<tr class="separator:aa5225e175cead067333287504deac952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9b1d3950512f2ceac000f90e1fede3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a8d9b1d3950512f2ceac000f90e1fede3">updateAnalogOutputs</a> (void)</td></tr>
<tr class="memdesc:a8d9b1d3950512f2ceac000f90e1fede3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the analog outputs of the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#a8d9b1d3950512f2ceac000f90e1fede3">More...</a><br /></td></tr>
<tr class="separator:a8d9b1d3950512f2ceac000f90e1fede3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8ec89d4e0a3e8f8edb57c1f7332daf5d"><td class="memItemLeft" align="right" valign="top"><a id="a8ec89d4e0a3e8f8edb57c1f7332daf5d" name="a8ec89d4e0a3e8f8edb57c1f7332daf5d"></a>
SPISettings&#160;</td><td class="memItemRight" valign="bottom"><b>dacSettings</b> = SPISettings(1000000, MSBFIRST, SPI_MODE1)</td></tr>
<tr class="separator:a8ec89d4e0a3e8f8edb57c1f7332daf5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77baab33c67c4bcce29dda25f67aab6c"><td class="memItemLeft" align="right" valign="top"><a id="a77baab33c67c4bcce29dda25f67aab6c" name="a77baab33c67c4bcce29dda25f67aab6c"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><b>name</b> = &quot;DACNAMEHERE&quot;</td></tr>
<tr class="separator:a77baab33c67c4bcce29dda25f67aab6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae084426c7efd4cbfb4e5c5598835e671"><td class="memItemLeft" align="right" valign="top"><a id="ae084426c7efd4cbfb4e5c5598835e671" name="ae084426c7efd4cbfb4e5c5598835e671"></a>
float const&#160;</td><td class="memItemRight" valign="bottom"><b>DAC_FULL_SCALE</b> = 10.0</td></tr>
<tr class="separator:ae084426c7efd4cbfb4e5c5598835e671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9097cb47f1c7e75e7e28c4d477fdc2c0"><td class="memItemLeft" align="right" valign="top"><a id="a9097cb47f1c7e75e7e28c4d477fdc2c0" name="a9097cb47f1c7e75e7e28c4d477fdc2c0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LDAC</b></td></tr>
<tr class="separator:a9097cb47f1c7e75e7e28c4d477fdc2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4d35074bf31b1ddabf56040a8798bc"><td class="memItemLeft" align="right" valign="top"><a id="a7f4d35074bf31b1ddabf56040a8798bc" name="a7f4d35074bf31b1ddabf56040a8798bc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dac</b> [nChannels] = {12, 13, 14, 15}</td></tr>
<tr class="separator:a7f4d35074bf31b1ddabf56040a8798bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71f18934fc275834c62fb0554f47f2a"><td class="memItemLeft" align="right" valign="top"><a id="ab71f18934fc275834c62fb0554f47f2a" name="ab71f18934fc275834c62fb0554f47f2a"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>GE</b> [nChannels] = {1, 1, 1, 1}</td></tr>
<tr class="separator:ab71f18934fc275834c62fb0554f47f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae494f5b2b4cdab410679b3ead2fb7d6b"><td class="memItemLeft" align="right" valign="top"><a id="ae494f5b2b4cdab410679b3ead2fb7d6b" name="ae494f5b2b4cdab410679b3ead2fb7d6b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>OS</b> [nChannels] = {0, 0, 0, 0}</td></tr>
<tr class="separator:ae494f5b2b4cdab410679b3ead2fb7d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ac934555dba2f5ddf61d88adb04e7f"><td class="memItemLeft" align="right" valign="top"><a id="a41ac934555dba2f5ddf61d88adb04e7f" name="a41ac934555dba2f5ddf61d88adb04e7f"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>vReadings</b> [4] = {0, 0, 0, 0}</td></tr>
<tr class="separator:a41ac934555dba2f5ddf61d88adb04e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2608cb0a15ad4a852df86c48b427453f"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a2608cb0a15ad4a852df86c48b427453f">initializeMsg</a> (void)</td></tr>
<tr class="memdesc:a2608cb0a15ad4a852df86c48b427453f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an initialization message for the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#a2608cb0a15ad4a852df86c48b427453f">More...</a><br /></td></tr>
<tr class="separator:a2608cb0a15ad4a852df86c48b427453f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace55466f178a90bf48a626b38ad3bac2"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#ace55466f178a90bf48a626b38ad3bac2">setVoltageMsg</a> (double voltage)</td></tr>
<tr class="memdesc:ace55466f178a90bf48a626b38ad3bac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a SPI message to set the voltage on the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#ace55466f178a90bf48a626b38ad3bac2">More...</a><br /></td></tr>
<tr class="separator:ace55466f178a90bf48a626b38ad3bac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d2b485b36e92704bb63736bd69b10a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a78d2b485b36e92704bb63736bd69b10a">readDacMsg</a> (void)</td></tr>
<tr class="memdesc:a78d2b485b36e92704bb63736bd69b10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a SPI message to read the DAC value.  <a href="classAD5791.html#a78d2b485b36e92704bb63736bd69b10a">More...</a><br /></td></tr>
<tr class="separator:a78d2b485b36e92704bb63736bd69b10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b51f220dfe4268170cb245775815dff"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a3b51f220dfe4268170cb245775815dff">threeNullBytesMsg</a> (void)</td></tr>
<tr class="memdesc:a3b51f220dfe4268170cb245775815dff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a SPI message with three null bytes.  <a href="classAD5791.html#a3b51f220dfe4268170cb245775815dff">More...</a><br /></td></tr>
<tr class="separator:a3b51f220dfe4268170cb245775815dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad07c492e8431b290a93c841b10578d90"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#ad07c492e8431b290a93c841b10578d90">bytesToVoltage</a> (<a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> message)</td></tr>
<tr class="memdesc:ad07c492e8431b290a93c841b10578d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a three-byte message to voltage for the <a class="el" href="classAD5791.html">AD5791</a> DAC.  <a href="classAD5791.html#ad07c492e8431b290a93c841b10578d90">More...</a><br /></td></tr>
<tr class="separator:ad07c492e8431b290a93c841b10578d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5bc3ad1dd1dd8cd91c497b4693b35cc6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a5bc3ad1dd1dd8cd91c497b4693b35cc6">intToThreeBytes</a> (int decimal, byte *DB1, byte *DB2, byte *DB3)</td></tr>
<tr class="memdesc:a5bc3ad1dd1dd8cd91c497b4693b35cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an integer value to three separate bytes.  <a href="classAD5791.html#a5bc3ad1dd1dd8cd91c497b4693b35cc6">More...</a><br /></td></tr>
<tr class="separator:a5bc3ad1dd1dd8cd91c497b4693b35cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec9971f907072befbe6c9f1be5aa933"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a5ec9971f907072befbe6c9f1be5aa933">threeByteToInt</a> (byte DB1, byte DB2, byte DB3)</td></tr>
<tr class="memdesc:a5ec9971f907072befbe6c9f1be5aa933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts three bytes to a 32-bit integer value.  <a href="classAD5791.html#a5ec9971f907072befbe6c9f1be5aa933">More...</a><br /></td></tr>
<tr class="separator:a5ec9971f907072befbe6c9f1be5aa933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710d1f0b068a9a95b3c705da03f76a2d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAD5791.html#a710d1f0b068a9a95b3c705da03f76a2d">threeByteToVoltage</a> (uint8_t DB1, uint8_t DB2, uint8_t DB3)</td></tr>
<tr class="memdesc:a710d1f0b068a9a95b3c705da03f76a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts three bytes to a voltage value.  <a href="classAD5791.html#a710d1f0b068a9a95b3c705da03f76a2d">More...</a><br /></td></tr>
<tr class="separator:a710d1f0b068a9a95b3c705da03f76a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7780cb107c5e5921d6b925d9e055c426"><td class="memItemLeft" align="right" valign="top"><a id="a7780cb107c5e5921d6b925d9e055c426" name="a7780cb107c5e5921d6b925d9e055c426"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>voltageToDecimal</b> (float voltage, byte *DB1, byte *DB2, byte *DB3)</td></tr>
<tr class="separator:a7780cb107c5e5921d6b925d9e055c426"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a09bbd20a7b0c2bb0e936728ab4cb36cc"><td class="memItemLeft" align="right" valign="top"><a id="a09bbd20a7b0c2bb0e936728ab4cb36cc" name="a09bbd20a7b0c2bb0e936728ab4cb36cc"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ldacPin</b></td></tr>
<tr class="separator:a09bbd20a7b0c2bb0e936728ab4cb36cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c5fcbe5bb3d9480a2d7ebc845df799"><td class="memItemLeft" align="right" valign="top"><a id="a19c5fcbe5bb3d9480a2d7ebc845df799" name="a19c5fcbe5bb3d9480a2d7ebc845df799"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>spiMode</b></td></tr>
<tr class="separator:a19c5fcbe5bb3d9480a2d7ebc845df799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27da6e0b3ed51d4ad91b21f3efef1ad"><td class="memItemLeft" align="right" valign="top"><a id="aa27da6e0b3ed51d4ad91b21f3efef1ad" name="aa27da6e0b3ed51d4ad91b21f3efef1ad"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>dacSyncPins</b> [nChannels]</td></tr>
<tr class="separator:aa27da6e0b3ed51d4ad91b21f3efef1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aa6ff6281229123133ca98f75568d7587"><td class="memItemLeft" align="right" valign="top"><a id="aa6ff6281229123133ca98f75568d7587" name="aa6ff6281229123133ca98f75568d7587"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>nChannels</b> = 4</td></tr>
<tr class="separator:aa6ff6281229123133ca98f75568d7587"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa5225e175cead067333287504deac952" name="aa5225e175cead067333287504deac952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5225e175cead067333287504deac952">&#9670;&#160;</a></span>AD5791()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AD5791::AD5791 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>syncPins</em>[nChannels], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ldacPin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classAD5791.html">AD5791</a> DAC class. </p>
<p >Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sync_pin</td><td>The sync or chip select of the dac chip. Different than spi_bus_config_pin </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_bus_config_pin</td><td>The pin that identifies the bus. More than one dac can share the same pin. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ldac_pin</td><td>The ldac pin used to update the analog outputs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bit_resolution</td><td>The bit resolution of the dac (eg. 20 for <a class="el" href="classAD5791.html">AD5791</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clock_divider</td><td>Sets the spi frequency. spi_freq = clock_freq (84 MHz for arduino due) / clock_divider (default: 4) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bit_order</td><td>Possible values:<ul>
<li>MSBFIRST Most significant bit first. (default)</li>
<li>LSBFIRST Least significant bit first.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_mode</td><td>Possible values:<ul>
<li>SPI_MODE0</li>
<li>SPI_MODE1 (default)</li>
<li>SPI_MODE2</li>
<li>SPI_MODE3 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ldacPin</td><td>The ldac pin used to update the analog outputs.</td></tr>
  </table>
  </dd>
</dl>
<p >This constructor initializes an instance of the <a class="el" href="classAD5791.html">AD5791</a> DAC class. It takes an array of sync pins for each channel and an LDAC pin as input. The function performs the following steps:</p><ol type="1">
<li>Assigns the LDAC pin value to the class member variable LDAC.</li>
<li>Copies the sync pin values from the input array to the class member array dacSyncPins, channel by channel.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">syncPins</td><td>An array of sync pins for each channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC. </td></tr>
    <tr><td class="paramname">ldacPin</td><td>The LDAC pin of the <a class="el" href="classAD5791.html">AD5791</a> DAC. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a75c5fd4fdff1c09b79bb4805a0e633bd" name="a75c5fd4fdff1c09b79bb4805a0e633bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c5fd4fdff1c09b79bb4805a0e633bd">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AD5791::begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC and sets up the required pins and SPI. </p>
<p >Configures pins for SPI and initializes SPI communication. This function must be called before calling any other function. </p><dl class="section return"><dt>Returns</dt><dd>0 if success</dd></dl>
<p >This function initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC by performing the following steps:</p><ol type="1">
<li>Iterates over each DAC channel:<ul>
<li>Sets the pin mode of the sync pin to OUTPUT.</li>
<li>Sets the initial value of the sync pin to HIGH.</li>
</ul>
</li>
<li>Sets the pin mode of the LDAC pin to OUTPUT.</li>
<li>Sets the initial value of the LDAC pin to HIGH.</li>
<li>Initializes and configures the SPI communication.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>This function assumes that the <code>dacSyncPins</code> array and <code>LDAC</code> pin have been properly defined and configured prior to calling this function. </dd></dl>

</div>
</div>
<a id="ad07c492e8431b290a93c841b10578d90" name="ad07c492e8431b290a93c841b10578d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad07c492e8431b290a93c841b10578d90">&#9670;&#160;</a></span>bytesToVoltage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double AD5791::bytesToVoltage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a>&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a three-byte message to voltage for the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >This function converts a three-byte message received from the <a class="el" href="classAD5791.html">AD5791</a> DAC to a corresponding voltage value. It takes a <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object as input, which contains the three bytes of the message. The function extracts the three bytes from the message and combines them to form a two's complement decimal value using the <code><a class="el" href="classAD5791.html#a5ec9971f907072befbe6c9f1be5aa933" title="Converts three bytes to a 32-bit integer value.">threeByteToInt()</a></code> function. It then calculates the voltage based on the decimal value using a specific formula for the <a class="el" href="classAD5791.html">AD5791</a> DAC. If the decimal value is less than or equal to 524287, the function calculates the voltage as the decimal value multiplied by the DAC full scale divided by 524287. Otherwise, if the decimal value is greater than 524287, the function calculates the voltage as the negation of (1048576 minus the decimal value) multiplied by the DAC full scale divided by 524288. The calculated voltage is returned by the function as a <code>double</code> value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object containing the three-byte message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding voltage value based on the received message. </dd></dl>

</div>
</div>
<a id="a8e74299fe9f435b3ce4664fe3ef1b21b" name="a8e74299fe9f435b3ce4664fe3ef1b21b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e74299fe9f435b3ce4664fe3ef1b21b">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AD5791::initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >initializes ALL the DACs from tristate mode to normal mode. </p><dl class="section return"><dt>Returns</dt><dd>0 if successful.</dd></dl>
<p >This function initializes the <a class="el" href="classAD5791.html">AD5791</a> DAC by sending an initialization message to each DAC channel. It performs the following steps:</p><ol type="1">
<li>Begins the SPI transaction with the DAC settings.</li>
<li>Generates an initialization message using the <a class="el" href="classAD5791.html#a2608cb0a15ad4a852df86c48b427453f" title="Generates an initialization message for the AD5791 DAC.">initializeMsg()</a> function.</li>
<li>Sets the block size and number of blocks in the message.</li>
<li>Iterates over each DAC channel:<ul>
<li>Lowers the sync pin of the current DAC channel.</li>
<li>Transfers the bytes of the initialization message to the DAC.</li>
<li>Raises the sync pin of the current DAC channel.</li>
</ul>
</li>
<li>Ends the SPI transaction.</li>
<li>Returns 0 to indicate successful initialization.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>An integer value of 0 indicating successful initialization of the <a class="el" href="classAD5791.html">AD5791</a> DAC. </dd></dl>

</div>
</div>
<a id="a2608cb0a15ad4a852df86c48b427453f" name="a2608cb0a15ad4a852df86c48b427453f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2608cb0a15ad4a852df86c48b427453f">&#9670;&#160;</a></span>initializeMsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> AD5791::initializeMsg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates an initialization message for the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >This function generates an initialization message for the <a class="el" href="classAD5791.html">AD5791</a> DAC. It creates a <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> object and sets the message bytes to specific values. The generated message is used to initialize the DAC. The function performs the following steps:</p><ol type="1">
<li>Creates a <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> object to store the initialization message.</li>
<li>Sets the first byte of the message to 0x20, indicating the specific command or address.</li>
<li>Sets the second byte of the message to 0x00, representing a specific data value or parameter.</li>
<li>Sets the third byte of the message to 0x02, representing another data value or parameter.</li>
<li>Returns the generated message to be used for initialization.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> object containing the initialization message for the <a class="el" href="classAD5791.html">AD5791</a> DAC. </dd></dl>

</div>
</div>
<a id="a5bc3ad1dd1dd8cd91c497b4693b35cc6" name="a5bc3ad1dd1dd8cd91c497b4693b35cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc3ad1dd1dd8cd91c497b4693b35cc6">&#9670;&#160;</a></span>intToThreeBytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AD5791::intToThreeBytes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>DB1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>DB2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>DB3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts an integer value to three separate bytes. </p>
<p >This function converts the given integer value to three separate bytes. It takes the integer value as input and uses pointer parameters to store the resulting bytes. The function performs the following steps:</p><ol type="1">
<li>Converts the integer value to three bytes by shifting and masking operations.<ul>
<li>The most significant byte is obtained by right-shifting the integer value by 16 bits and ORing it with 16 to set a control bit.</li>
<li>The middle byte is obtained by right-shifting the integer value by 8 bits and masking it with 255 (0xFF) to get the 8 least significant bits.</li>
<li>The least significant byte is obtained by masking the integer value with 255 (0xFF) to get the 8 least significant bits.</li>
</ul>
</li>
<li>Stores the three resulting bytes in the memory locations pointed to by the DB1, DB2, and DB3 pointers.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">decimal</td><td>The integer value to be converted to three bytes. </td></tr>
    <tr><td class="paramname">DB1</td><td>Pointer to a byte variable to store the most significant byte. </td></tr>
    <tr><td class="paramname">DB2</td><td>Pointer to a byte variable to store the middle byte. </td></tr>
    <tr><td class="paramname">DB3</td><td>Pointer to a byte variable to store the least significant byte. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ed87840044b22de91def41017467414" name="a7ed87840044b22de91def41017467414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed87840044b22de91def41017467414">&#9670;&#160;</a></span>readDac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double AD5791::readDac </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the DAC value from the specified channel. </p>
<p >This function reads the DAC value from the specified channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC. It performs the following steps:</p><ol type="1">
<li>Creates an instance of the <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> struct named <code>msg</code> using the <code>readDacMsg</code> function.</li>
<li>Sets the <code>blockSize</code> and <code>nBlocks</code> fields of <code>msg</code> to 3 and 1, respectively.</li>
<li>Iterates over the <code>nBlocks</code> and transfers the bytes of <code>msg</code> over SPI, using the appropriate sync pin for the channel.</li>
<li>Delays for a short period of time (1 microsecond).</li>
<li>Creates an array <code>data</code> to store the received bytes.</li>
<li>Creates another instance of the <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> struct named <code>msg2</code> using the <code>threeNullBytesMsg</code> function.</li>
<li>Sets the <code>blockSize</code> and <code>nBlocks</code> fields of <code>msg2</code> to 3 and 1, respectively.</li>
<li>Iterates over the <code>nBlocks</code> and transfers the bytes of <code>msg2</code> over SPI, storing the received bytes in <code>data</code>.</li>
<li>Converts the received bytes in <code>data</code> to a voltage value using the <code>threeByteToVoltage</code> function.</li>
<li>Returns the voltage value.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel number from which to read the DAC value (0 to 2). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The DAC value as a voltage. </dd></dl>

</div>
</div>
<a id="a78d2b485b36e92704bb63736bd69b10a" name="a78d2b485b36e92704bb63736bd69b10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78d2b485b36e92704bb63736bd69b10a">&#9670;&#160;</a></span>readDacMsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> AD5791::readDacMsg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a SPI message to read the DAC value. </p>
<p >This function generates a SPI message to read the DAC value from the <a class="el" href="classAD5791.html">AD5791</a> DAC. It performs the following steps:</p><ol type="1">
<li>Creates an instance of the <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> struct named <code>msg</code>.</li>
<li>Assigns the value 0x90 to the first byte of the message, representing the command byte for reading the DAC value.</li>
<li>Assigns the value 0x00 to the second byte of the message.</li>
<li>Assigns the value 0x00 to the third byte of the message.</li>
<li>Returns the generated message <code>msg</code>.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object for reading the DAC value. </dd></dl>

</div>
</div>
<a id="acca3344b0eb2f7949880d93f0069f6dc" name="acca3344b0eb2f7949880d93f0069f6dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acca3344b0eb2f7949880d93f0069f6dc">&#9670;&#160;</a></span>readVoltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double AD5791::readVoltage </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the voltage value from the specified channel. </p>
<p >This function reads and returns the voltage value from the specified channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC. It performs the following steps:</p><ol type="1">
<li>Checks if the channel is within the valid range (0 to 4).<ul>
<li>If the channel is outside the valid range, it prints an error message and returns 0.</li>
</ul>
</li>
<li>If the channel is valid, it returns the corresponding voltage reading from the <code>vReadings</code> array.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel number from which to read the voltage (0 to 4). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The voltage value from the specified channel, or 0 if the channel is invalid. </dd></dl>

</div>
</div>
<a id="a913259b0645069859ee6d7046a10a912" name="a913259b0645069859ee6d7046a10a912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a913259b0645069859ee6d7046a10a912">&#9670;&#160;</a></span>setVoltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double AD5791::setVoltage </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>voltage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>updateOutputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the voltage on the specified channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >This function sets the voltage on the specified channel of the <a class="el" href="classAD5791.html">AD5791</a> DAC. It takes the channel number, desired voltage, and an optional flag to update the analog outputs as input. The function performs the following steps:</p><ol type="1">
<li>Begins a SPI transaction with the DAC settings.</li>
<li>Generates a SPI message using the <code>setVoltageMsg</code> function to set the desired voltage.</li>
<li>Sets the block size and number of blocks in the message to 3 and 1, respectively.</li>
<li>Checks if the desired voltage is within the valid range. If it exceeds the range, it prints an error message and returns 999.</li>
<li>If the voltage is within the valid range:<ul>
<li>For each block in the message, it brings the corresponding DAC sync pin LOW.</li>
<li>Transfers the message bytes using SPI.transfer to send the voltage data.</li>
<li>Sets the corresponding DAC sync pin HIGH to complete the transfer.</li>
</ul>
</li>
<li>If the <code>updateOutputs</code> flag is true, it calls the <code>updateAnalogOutputs</code> function to update the analog outputs.</li>
<li>Calculates the updated voltage based on the transferred message using the <code>bytesToVoltage</code> function and stores it in the <code>vReadings</code> array.</li>
<li>Returns the updated voltage.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel number of the <a class="el" href="classAD5791.html">AD5791</a> DAC to set the voltage on. </td></tr>
    <tr><td class="paramname">voltage</td><td>The desired voltage to be set on the specified channel. </td></tr>
    <tr><td class="paramname">updateOutputs</td><td>Flag indicating whether to update the analog outputs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The updated voltage on the specified channel. If the desired voltage exceeds the valid range, it returns 999. </dd></dl>

</div>
</div>
<a id="ace55466f178a90bf48a626b38ad3bac2" name="ace55466f178a90bf48a626b38ad3bac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace55466f178a90bf48a626b38ad3bac2">&#9670;&#160;</a></span>setVoltageMsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> AD5791::setVoltageMsg </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>voltage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a SPI message to set the voltage on the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >This function generates a SPI message to set the desired voltage on the <a class="el" href="classAD5791.html">AD5791</a> DAC. It takes a voltage value as input and returns a <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object that represents the SPI message. The function performs the following steps:</p><ol type="1">
<li>Calculates the two's complement decimal value based on the input voltage using a specific formula for the <a class="el" href="classAD5791.html">AD5791</a> DAC.</li>
<li>Constructs a <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object to store the SPI message.</li>
<li>Sets the message bytes according to the calculated decimal value, considering the byte order specified in the datasheet.<ul>
<li>The first byte is constructed from the most significant 8 bits of the decimal value, including a control bit to write to the DAC register.</li>
<li>The second byte is constructed from the next 8 bits of the decimal value.</li>
<li>The third byte is constructed from the least significant 8 bits of the decimal value.</li>
</ul>
</li>
<li>Returns the generated <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">voltage</td><td>The desired voltage to be set on the <a class="el" href="classAD5791.html">AD5791</a> DAC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object representing the SPI message to set the voltage. </dd></dl>

</div>
</div>
<a id="a5ec9971f907072befbe6c9f1be5aa933" name="a5ec9971f907072befbe6c9f1be5aa933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec9971f907072befbe6c9f1be5aa933">&#9670;&#160;</a></span>threeByteToInt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t AD5791::threeByteToInt </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>DB1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>DB2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>DB3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts three bytes to a 32-bit integer value. </p>
<p >This function takes three bytes as input and combines them to form a 32-bit integer value. It performs the following steps:</p><ol type="1">
<li>Masks the first byte (<code>DB1</code>) with <code>15</code> (binary: 00001111) to extract the lower 4 bits.</li>
<li>Shifts the extracted bits 8 positions to the left.</li>
<li>Combines the shifted bits with the second byte (<code>DB2</code>) using a bitwise OR operation.</li>
<li>Shifts the combined value 8 positions to the left.</li>
<li>Combines the shifted value with the third byte (<code>DB3</code>) using a bitwise OR operation.</li>
<li>Returns the resulting 32-bit integer value.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DB1</td><td>The first byte. </td></tr>
    <tr><td class="paramname">DB2</td><td>The second byte. </td></tr>
    <tr><td class="paramname">DB3</td><td>The third byte. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The combined 32-bit integer value. </dd></dl>

</div>
</div>
<a id="a710d1f0b068a9a95b3c705da03f76a2d" name="a710d1f0b068a9a95b3c705da03f76a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a710d1f0b068a9a95b3c705da03f76a2d">&#9670;&#160;</a></span>threeByteToVoltage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double AD5791::threeByteToVoltage </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>DB1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>DB2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>DB3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts three bytes to a voltage value. </p>
<p >This function takes three bytes as input and converts them to a voltage value based on the DAC's full scale range. It performs the following steps:</p><ol type="1">
<li>Calls the <code><a class="el" href="classAD5791.html#a5ec9971f907072befbe6c9f1be5aa933" title="Converts three bytes to a 32-bit integer value.">threeByteToInt()</a></code> function to obtain a 32-bit integer value from the three bytes.</li>
<li>Checks if the obtained decimal value is less than or equal to 524287.</li>
<li>If true, calculates the voltage as the decimal value multiplied by the DAC's full scale divided by 524287.</li>
<li>If false, calculates the voltage as the negative value of (1048576 minus the decimal value) multiplied by the DAC's full scale divided by 524288.</li>
<li>Returns the calculated voltage value.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DB1</td><td>The first byte. </td></tr>
    <tr><td class="paramname">DB2</td><td>The second byte. </td></tr>
    <tr><td class="paramname">DB3</td><td>The third byte. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The voltage value based on the three input bytes and the DAC's full scale range. </dd></dl>

</div>
</div>
<a id="a3b51f220dfe4268170cb245775815dff" name="a3b51f220dfe4268170cb245775815dff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b51f220dfe4268170cb245775815dff">&#9670;&#160;</a></span>threeNullBytesMsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a> AD5791::threeNullBytesMsg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a SPI message with three null bytes. </p>
<p >This function generates a SPI message containing three null bytes. It performs the following steps:</p><ol type="1">
<li>Creates an instance of the <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> struct named <code>msg2</code>.</li>
<li>Assigns the value 0x00 to the first byte of the message, representing the command byte.</li>
<li>Assigns the value 0x00 to the second byte of the message.</li>
<li>Assigns the value 0x00 to the third byte of the message.</li>
<li>Returns the generated message <code>msg2</code>.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="structspi__utils_1_1Message.html">spi_utils::Message</a></code> object containing three null bytes. </dd></dl>

</div>
</div>
<a id="a8d9b1d3950512f2ceac000f90e1fede3" name="a8d9b1d3950512f2ceac000f90e1fede3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9b1d3950512f2ceac000f90e1fede3">&#9670;&#160;</a></span>updateAnalogOutputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AD5791::updateAnalogOutputs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the analog outputs of the <a class="el" href="classAD5791.html">AD5791</a> DAC. </p>
<p >Updates the outputs of all Dac objects sharing the same ldacPin_.</p>
<p >This function updates the analog outputs of the <a class="el" href="classAD5791.html">AD5791</a> DAC. It sets the LDAC (Load DAC) pin to LOW and then to HIGH in order to update the outputs. The function is responsible for triggering the update process of the DAC. After setting the LDAC pin to HIGH, the DAC outputs the new analog values. This function assumes that the DAC has been previously configured and the analog values have been set. It does not take any input parameters or return any values. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="ad5791_8h_source.html">ad5791.h</a></li>
<li>src/ad5791.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classAD5791.html">AD5791</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
